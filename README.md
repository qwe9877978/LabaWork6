
## Лабораторная работа №6

```
Демин Мефодий ИТ-12
```

---

## Общая структура решения

Проект реализован в виде единого консольного приложения с двухуровневым меню. Все задания выполнены в одном проекте, используются шаблоны (generics), обеспечена полная валидация входных данных и снабжены XML-документацией. Код соответствует Microsoft CodeStyle и не содержит тернарных операторов.

Файловая структура:
```
├── Program.cs      — Главное меню и точка входа
├── Cats.cs         — Реализация задачи 1 (коты)
└── Fractions.cs    — Реализация задачи 2 (дроби)
```

---

## Задача 1: Система для работы с котами

### Условие
Реализовать класс `Cat`, который:
- Принимает имя кота при создании
- Может мяукнуть один раз (выводит `<Имя>: мяу!`)
- Может мяукнуть N раз (выводит `<Имя>: мяу-мяу-...-мяу!`)
- Должен поддерживать подсчёт количества мяуканий
- Должен работать с коллекциями котов

### Алгоритм решения задачи 1

1. **Интерфейс `IMeowable`**  
   Создан базовый интерфейс с методом `Meow()`, обеспечивающий единообразную работу со всеми "мяукающими" объектами. Это позволяет легко расширять систему (например, добавлять `RobotCat`) без изменения основной логики.

2. **Класс `Cat`**  
   - Хранит имя кота с обязательной валидацией (имя не может быть пустым или `null`)
   - Реализует два метода `Meow()`:
     * Без параметров — выводит одиночное мяуканье в формате `«Имя: мяу!»`
     * С параметром `n` — генерирует строку из `n` повторяющихся "мяу", разделённых дефисами, без использования `Enumerable.Repeat` (реализовано через простой цикл)
   - Проверяет корректность входных данных (количество мяуканий > 0)

3. **ШАБЛОН `MeowCounter<T>`**  
   - Использует шаблоны (обобщения) для подсчёта вызовов метода `Meow()`
   - Хранит внутренний счётчик `CallCount`, инкрементируемый при каждом мяуканье
   - Работает с любым типом, реализующим `IMeowable`, благодаря ограничению `where T : IMeowable`
   - Оригинальный объект доступен через публичное свойство `OriginalObject` (для безопасного доступа к имени кота)

4. **Вспомогательные методы в `MeowHelper`**  
   - `MeowAll(IEnumerable<IMeowable>)` — вызывает мяуканье для всех котов в коллекции, игнорируя `null`-элементы
   - `MeowFiveTimes(IMeowable)` — заставляет кота мяукнуть ровно 5 раз с использованием цикла `while`

5. **Глобальное состояние**  
   Для корректного подсчёта всех мяуканий кота (включая те, что выполнялись в других подзаданиях) используется общий экземпляр `MeowCounter<Cat>`, хранящийся на уровне главного меню.

### Тестирование задачи 1

- **Тест 1.1**: Проверка создания кота с валидным и пустым именем  
  Ожидаемый результат: исключение при пустом имени, корректное мяуканье при валидном имени.

- **Тест 1.2**: Проверка N-кратного мяуканья  
  Ожидаемый результат: строка `<Имя>: мяу-мяу-...-мяу!` с `N` повторами, исключение при `N ≤ 0`.

- **Тест 1.3**: Проверка подсчёта всех мяуканий  
  Ожидаемый результат: счётчик учитывает мяуканья из всех подзаданий (1, 2 и 3), а не только текущего вызова.

- **Тест 1.4**: Работа с коллекцией котов  
  Ожидаемый результат: каждый кот в коллекции мяукает один раз, `null`-элементы игнорируются.

---

## Задача 2: Система для работы с дробями

### Условие
Реализовать класс `Fraction`, который:
- Представляет дробь в виде числителя и знаменателя
- Поддерживает арифметические операции (+, -, *, /) с другими дробями и целыми числами
- Реализует сравнение дробей
- Обеспечивает клонирование объектов
- Кэширует вещественное значение дроби с использованием шаблонов

### Алгоритм решения

1. **Базовый класс `Fraction`**  
   - Хранит числитель и знаменатель с отдельной нормализацией знака (знак всегда в числителе, знаменатель всегда положителен)
   - Проверяет знаменатель на ноль в конструкторе и выбрасывает `ArgumentException`
   - Реализует арифметические операции через работу с общими знаменателями:
     * Сложение/вычитание: `(a*d ± c*b)/(b*d)`
     * Умножение: `(a*c)/(b*d)`
     * Деление: `(a*d)/(b*c)` с проверкой делителя на ноль
   - Определяет методы `Equals()` и `GetHashCode()` для корректного сравнения дробей (включая эквивалентные: `1/2 == 2/4`)
   - Реализует интерфейс `ICloneable` для создания глубоких копий объектов

2. **Кэширование через шаблоны**  
   - Создан интерфейс `ICachedDouble` с методом `GetCachedValue()`
   - Реализован шаблон `CachedFraction<T>`, который:
     * Наследуется от `Fraction` и реализует `ICachedDouble`
     * Вычисляет и сохраняет вещественное значение дроби **один раз** в конструкторе
     * Работает с любым типом-наследником `Fraction` благодаря ограничению `where T : Fraction`
     * Обеспечивает потенциально высокую производительность при многократных запросах

3. **Арифметические операции**  
   - Все операции создают **новые объекты**, не изменяя исходные (иммутабельность)
   - Поддержка операций с целыми числами через неявное преобразование в дробь `value/1`

### Тестирование задачи 2

- **Тест 2.1**: Арифметические операции  
  Ожидаемый результат: корректные результаты сложения, вычитания, умножения и деления, исключение при делении на ноль.

- **Тест 2.2**: Сравнение дробей  
  Ожидаемый результат: `new Fraction(1, 2).Equals(new Fraction(2, 4)) == true`.

- **Тест 2.3**: Клонирование  
  Ожидаемый результат: клон имеет те же значения, но другую ссылку (`ReferenceEquals` возвращает `false`).

- **Тест 2.4**: Кэширование  
  Ожидаемый результат: метод `GetCachedValue()` возвращает одно и то же значение при многократных вызовах; кэширующий объект работает как обычная дробь.

---
```
